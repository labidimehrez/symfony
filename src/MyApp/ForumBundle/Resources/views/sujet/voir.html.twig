{# empty Twig template #}
{{ render(controller('MyAppEspritBundle:publicite:showextpub')) }}
{{ render(controller('MyAppEspritBundle:notification:shownumber')) }} {# pour afficher notif number #}


 {% include 'TwitterBootstrapBundle::stylesheets.html.twig'%}
 {% include 'MyAppEspritBundle:Default:sousmenu.html.twig'  with { 'routeName':app.request.get('_route') }%}

<script src="{{ asset('bundles/myappesprit/js/jquery-1.10.1.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('bundles/myappesprit/js/jquery-1.4.2.min.js') }}" type="text/javascript"></script>

<div class="contenudetemplate">
    <div class="paddingdebataveccomment">

        </br> 

{% if sujet.user is not null %}
{% if sujet.user.image is not null  %}
        <img src="{{sujet.user.image }}"  
             class="imageuserdebataveccomment" alt="" />  
{% else %}
        <img src="{{ asset('bundles/myappesprit/images/user.png') }}"  
             class="imageuserdebataveccomment" alt=""  />             
{% endif%}

        &nbsp;&nbsp;&nbsp;
        <b style="color: black" >{{sujet.user.username|capitalize}}</b>
        <b class="timestyle">{{ time_diff(sujet.datecreation) }}{#{sujet.datecreation|date('') |ago}#} </b>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <img src="{{ asset('bundles/myappesprit/images/commentCount.png') }}" height="20px;" width="20px;" alt=""/> &nbsp;<b>{{commentCount}}</b>
        </br> 

{% else%}

        <img src="{{ asset('bundles/myappesprit/images/user.png') }}"  
             class="imageuserdebataveccomment"alt="" />  
        &nbsp;&nbsp;&nbsp;
        <b style="color: black">Anonymous</b>
        <b class="timestyle">{{ time_diff(sujet.datecreation) }}{#{sujet.datecreation|date('') |ago}#} </b>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <img src="{{ asset('bundles/myappesprit/images/commentCount.png') }}" height="20px;" width="20px;" alt=""/> &nbsp;<b>{{commentCount}}</b>

 {% endif%}       

        <b style="color: black;  padding-left: 130px;"> <FONT size="5px;"> {{sujet.sujet}}</FONT></b>
        <div class="contenutopic">





            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</br>
         {{sujet.contenu|Contenu}}   </br>  
         
             
    {% if is_granted( 'ROLE_USER' ) %} <a class="bouttonnouveaucommentaire" style="cursor:pointer" id="Addnewcomment">Add new comment</a>  
    {%else%}<a href="#"  class="clickTip exampleTip" id="Addnewcomment">Add new comment</a> {%endif%}
    
            <script type="text/javascript">
                $("a.bouttonnouveaucommentaire").click(function() {
                    $("div.inputajoutcommentaire").slideToggle();
                });
            </script>
     {% include 'MyAppForumBundle:sujet/fragment:divedittag.html.twig'%} 




        </div>

        <div class="commentaire">
            {# debut affichage des commentaires #}
              {% for  commentaire in commentaire %}{% if loop.index <= sujet.thread %} {% set commentaireid = commentaire.id %}

            <div class="contenucommentaireparent"> 

            {% if commentaire.user.image is not null  %} <img src="{{commentaire.user.image }}" class="imageuser" alt=""/> {% else %}  
                <img src="{{ asset('bundles/myappesprit/images/user.png') }}"  class="imageuser" alt=""   />{% endif%} 


                <b>{{commentaire.user.username|capitalize}}</b><b class="timestyle">{{ time_diff(commentaire.datecreation) }}</b>



            {% if commentaire.vote  is not null %}
                <b class="likecount" style="cursor:pointer;"><img src="{{ asset('bundles/myappesprit/images/like.png') }}" height="20px;" width="20px;" alt=""/>
                    &nbsp;{{commentaire.vote}} </b>
             {%endif%}       
                </br>   {{commentaire.texte}}  </br> 



         {% include 'MyAppForumBundle:sujet/fragment:showhidethread.html.twig'%}



                <style type="text/css">
                    a.bouttonsousnouveaucommentaire{{commentaireid}}{
                        color: #c52821;
                        font-weight: bold;
                        text-decoration:none;                       
                    }
                </style> 
 {% if is_granted( 'ROLE_USER' ) %}            
 <a class="bouttonsousnouveaucommentaire{{commentaireid}}" style="cursor:pointer" id="Addnewcomment" >Add new comment</a>
  {%else%} <a href="#" class="clickTip exampleTip" id="Addnewcomment">Add new comment</a>{%endif%}              
                <script type="text/javascript">
                    $("a.bouttonsousnouveaucommentaire{{commentaireid}}").click(function() {
                        $("div.threadcontent{{commentaireid}}").slideToggle();
                        $("div.inputsnouveausouscommentaire{{commentaireid}}").slideToggle();
                    });
                </script>


                 {###################}

                <b class="likebutton" style="cursor:pointer;">like</b>
                  {%if  ("EDITOR" in app.user.roles|join) or ( commentaire.user ==  app.user.username ) %}
                <a class="bouttoneditcommentaire{{commentaireid}}" style="text-decoration:none;cursor:pointer;"><b class="likebutton">edit</b></a>
                {%endif%}
                &nbsp;&nbsp;&nbsp;&nbsp; 
                  {%if  ("EDITOR" in app.user.roles|join) or ( commentaire.user ==  app.user.username ) %}
                <a href="{{ path('my_app_forum_commentaire_delete',{'id':commentaire.id}) }}"style="text-decoration:none;cursor:pointer;" class="deletecommentaire">delete</a> 
                {%endif%}
                <script type="text/javascript">
                    $("a.bouttoneditcommentaire{{commentaireid}}").click(function() {
                        $("div.threadcontent{{commentaireid}}").slideToggle();
                        $("div.inputeditcommentaire{{commentaireid}}").slideToggle();
                    });
                </script>
                <div class="inputeditcommentaire{{commentaireid}}">
                         {% include 'MyAppForumBundle:sujet/fragment:inputeditcommentaire.html.twig'%} 
                </div>  
                <style type="text/css">
                    div.inputeditcommentaire{{commentaireid}}{display: none;}
                </style>
                <style type="text/css">
                    div.threadcontent{{commentaireid}}{display: none;}
                </style>
                <div class="threadcontent{{commentaireid}}">
                    {% for souscommentaire in souscommentaire %}{% if souscommentaire.commentaire.id == commentaire.id%}


                    <div class="souscommentairesdetails">

                         {% include 'MyAppForumBundle:sujet/fragment:souscommentairesdetails.html.twig'%} 

                    </div>
                {%endif%} {%endfor%}

                    <div class="inputsnouveausouscommentaire{{commentaireid}}"  >
                         {% if is_granted( 'ROLE_USER' ) %}  
                                {% include 'MyAppForumBundle:sujet/fragment:inputajoutsousommentaire.html.twig'%}  
                         {%endif%}
                    </div>     


                </div>



                </br> 
            </div>
          {%endif%} {% endfor%} 


        </div>
                    {# fin affichage des commentaires #}
        <style type="text/css">
            div.inputajoutcommentaire{display: none;}
        </style>
        <div class="inputajoutcommentaire">
            {% if is_granted( 'ROLE_USER' ) %} 
                {% include 'MyAppForumBundle:sujet/fragment:inputajoutcommentaire.html.twig'%} 
            {%endif%}



        </div>  
        {#####################################################}






        <br>





    </div> 
</div>



<style type="text/css"> 
    a.bouttonnouveaucommentaire {
        text-decoration:none;
        color: #c52821;
        font-weight: bold;
        height: 50px;
        width: 200px;
        padding-left: 15px;
        padding-top: 10px;
        background-color: transparent;
    }

    a.bouttoneditcommentaire{
        text-decoration:none;
        color: #c52821;
        font-weight: bold;
        height: 50px;
        width: 200px;
        padding-left: 15px;
        padding-top: 10px;
        background-color: transparent;
        /* border-color: aqua;
         border-style: dashed;*/
    }

    div.inputnouveaucommentaire {display: none;}


    div.loginifcomment{
        padding: 10px;
        padding-left: 50px;
        width: 450px;
        display: none;
        -moz-box-shadow: 10px 10px 5px 0px #656565;
        -webkit-box-shadow: 10px 10px 5px 0px #656565;
        -o-box-shadow: 10px 10px 5px 0px #656565;
        box-shadow: 10px 10px 5px 0px #656565;
        filter:progid:DXImageTransform.Microsoft.Shadow(color=#656565, Direction=134, Strength=5);
        border: 1px black;border-style: solid;
    }

    div.loginifSUBcomment{
        padding: 10px;
        padding-left: 50px;
        width: 450px;
        display: none;
        -moz-box-shadow: 10px 10px 5px 0px #656565;
        -webkit-box-shadow: 10px 10px 5px 0px #656565;
        -o-box-shadow: 10px 10px 5px 0px #656565;
        box-shadow: 10px 10px 5px 0px #656565;
        filter:progid:DXImageTransform.Microsoft.Shadow(color=#656565, Direction=134, Strength=5);
        border: 1px black;border-style: solid;
    }

    a#Addnewcomment{    text-decoration: none;    font-weight: bold;    color: #c52821;}
    a.sho{display: none;}
</style>





<script type="text/javascript">
    $(document).ready(function() {
        /* $("a.bouttonnouveaucommentaire").click(function()
         {
         $("div.inputnouveaucommentaire").slideToggle("slow");
         });*/
        /* $("a.bouttonsousnouveaucommentaire").click(function()
         {
         $("div.inputnouveausouscommentaire").slideToggle("slow");
         });*/

    });
</script>






                                    {## pour la tooltip NON CONNECTé ##}
<link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<!-- aToolTip css -->
<link rel="stylesheet" type="text/css" media="screen" href="{{ asset('bundles/myappforum/css/tooltipcommentaire/css/atooltip.css') }}"/> 
<!-- Scripts -->
<script src="{{ asset('bundles/myappforum/css/tooltipcommentaire/js/jquery.min.js') }}" type="text/javascript"></script>
<script src="{{ asset('bundles/myappforum/css/tooltipcommentaire/js/jquery.atooltip.js') }}" type="text/javascript"></script>
<!-- aToolTip js -->
<script type="text/javascript">
    $(function() {
        $('a.normalTip').aToolTip();
        $('a.normalTip').aToolTip({effect: 'slide', slideOffset: 30});


        $('a.fixedTip').aToolTip({
            fixed: true
        });

        $('a.clickTip').aToolTip({
            effect: 'slide', slideOffset: 30,
            clickIt: true,
            tipContent:
                    '<div class="tool">' + '</br>' +
                    '<center>Du skal være logget ind for at kommentere</center>' + '</br>' +
                    '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="{{ path('fos_user_security_login') }}" class="btn btn-warning btn-lg" >Log ind</a>' +
                    '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="{{ path('fos_user_registration_register') }}" class="rouge" >Opret ny bruger</a>' +
                    '</div>'
        });


    });
</script>
<style type="text/css">
    .tool{	 
        //border:1px solid red;
        width:402px;
        height:86px;
        background-color:#FFF;
    }
</style>
                                    {## pour la tooltip NON CONNECTé ##}
{#<a href="#" class="clickTip exampleTip" >Add</a> #}






 